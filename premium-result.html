<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Premium Result</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container mt-5">
    <h2 class="text-center text-danger mb-4">Calculated Premium Result</h2>
    <div id="output" class="bg-light p-4 rounded shadow-sm">
      <div class="text-muted text-center">Calculating your premium, please wait...</div>
    </div>
  </div>

  <script>
    const quoteData = JSON.parse(localStorage.getItem('quoteInput'));

    async function calculate() {
      try {
        const payload = {
          DOB: quoteData.dob,
          Gender: quoteData.gender,
          MobileNo: quoteData.mobile,
          EmailId: quoteData.email,
          Pincode: quoteData.pincode,
          SumInsured: quoteData.sumAssured,
          Smoking: quoteData.smoker,
          FullName: quoteData.name
        };

        const res = await fetch('https://balicws.bajajallianz.com/BalicWSRest/BalicWSRest', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(payload)
});
        if (!res.ok) {
          throw new Error('Network response was not ok');
        }

        const premiumData = await res.json();

        document.getElementById('output').innerHTML = `
          <h5><strong>Name:</strong> ${quoteData.name}</h5>
          <h5><strong>Sum Assured:</strong> ₹${quoteData.sumAssured}</h5>
          <h5><strong>Premium:</strong> ₹${premiumData.PremiumAmount || 'Not Available'}</h5>
          <h5><strong>Plan ID:</strong> ${premiumData.PLAN_ID || 'N/A'}</h5>
        `;
      } catch (error) {
        document.getElementById('output').innerHTML = `
          <div class='text-danger'>Failed to fetch premium. ${error.message}</div>
        `;
      }
    }

    calculate();
  </script>
</body>
</html>
