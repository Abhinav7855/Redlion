<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OTP Video Unlock</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  </head>
  <body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div class="bg-white p-6 rounded-xl shadow-md w-full max-w-md text-center">
      <h2 class="text-2xl font-bold mb-4">Enter Details to Watch Video</h2>

      <input id="name" type="text" placeholder="Your Name" class="w-full border p-2 mb-3 rounded" />
      <input id="mobile" type="tel" placeholder="Mobile Number" class="w-full border p-2 mb-3 rounded" />

      <button onclick="sendOTP()" class="bg-blue-500 text-white px-4 py-2 rounded mb-3 w-full">
        Get OTP
      </button>

      <input id="otp" type="text" placeholder="Enter OTP" class="w-full border p-2 mb-3 rounded" style="display: none" />
      <button id="submitBtn" onclick="verifyOTP()" class="bg-green-500 text-white px-4 py-2 rounded w-full" style="display: none">
        Submit
      </button>

      <!-- <div id="videoSection" class="mt-6 hidden">
        <video controls class="w-full rounded mb-3">
          <source src="your-video.mp4" type="video/mp4" />
          Your browser does not support the video tag.
        </video>
        <p class="text-gray-700">
          üôè ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶! ‡§Ü‡§™ ‡§Ø‡•á ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§¶‡•á‡§ñ ‡§ö‡•Å‡§ï‡•á ‡§π‡•à‡§Ç‡•§ ‡§π‡§Æ ‡§ú‡§≤‡•ç‡§¶ ‡§Ü‡§™‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á‡•§
        </p>
      </div>
    </div> -->

    <script>
      // ‚úÖ Replace this config with your actual Firebase project config
      const firebaseConfig = {
        apiKey: "AIzaSyBPHXyshzXLOSSBXuanDZ0JuWsqqxIREXk",
        authDomain: "health-product-c40e8.firebaseapp.com",
        databaseURL: "https://health-product-c40e8-default-rtdb.firebaseio.com/",
        projectId: "health-product-c40e8",
        storageBucket: "health-product-c40e8.firebasestorage.app",
        messagingSenderId: "944129363390",
        appId: "1:944129363390:web:9ba558e185026bf281fdef"
      };

      firebase.initializeApp(firebaseConfig);
      const db = firebase.database();

      let generatedOTP = "";

      function sendOTP() {
        const name = document.getElementById("name").value.trim();
        const mobile = document.getElementById("mobile").value.trim();

        if (!name || !mobile) {
          alert("Please enter your name and mobile number.");
          return;
        }

        generatedOTP = Math.floor(1000 + Math.random() * 9000).toString();
        console.log("Generated OTP:", generatedOTP);

        document.getElementById("otp").style.display = "block";
        document.getElementById("submitBtn").style.display = "block";

        // ‚úÖ Save to Firebase
        db.ref("videoOTPUsers").push({
          name: name,
          mobile: mobile,
          timestamp: new Date().toISOString()
        }).then(() => {
          console.log("‚úÖ Data saved to Firebase");
        }).catch((err) => {
          console.error("‚ùå Firebase Save Error:", err);
        });

        // ‚úÖ Send OTP via SMS using 2Factor
        fetch(`https://2factor.in/API/V1/21335cd0-50d1-11f0-a562-0200cd936042/SMS/${mobile}/${generatedOTP}`, {
  method: "GET"
})
          .then((res) => {
            if (!res.ok) {
              throw new Error("Network response was not ok");
            }
            return res.text();
          })
          .then((data) => console.log("‚úÖ OTP sent:", data))
          .catch((err) => console.error("‚ùå SMS Error:", err));
      }

      function verifyOTP() {
  const userOTP = document.getElementById("otp").value.trim();
  if (userOTP === generatedOTP) {
    console.log("‚úÖ OTP verified, redirecting...");
    window.location.href = "video.html"; // ‚úÖ Go to video page
  } else {
    alert("Incorrect OTP. Please try again.");
  }
}

    </script>
  </body>
</html>
