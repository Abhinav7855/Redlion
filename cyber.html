<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OTP Video Unlock</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div class="bg-white p-6 rounded-xl shadow-md w-full max-w-md text-center">
      <h2 class="text-2xl font-bold mb-4">Enter Details to Watch Video</h2>

      <input
        id="name"
        type="text"
        placeholder="Your Name"
        class="w-full border p-2 mb-3 rounded"
      />
      <input
        id="mobile"
        type="tel"
        placeholder="Mobile Number"
        class="w-full border p-2 mb-3 rounded"
      />

      <button
        onclick="sendOTP()"
        class="bg-blue-500 text-white px-4 py-2 rounded mb-3 w-full"
      >
        Get OTP
      </button>

      <input
        id="otp"
        type="text"
        placeholder="Enter OTP"
        class="w-full border p-2 mb-3 rounded"
        style="display: none"
      />
      <button
        id="submitBtn"
        onclick="verifyOTP()"
        class="bg-green-500 text-white px-4 py-2 rounded w-full"
        style="display: none"
      >
        Submit
      </button>

      <div id="videoSection" class="mt-6 hidden">
        <video controls class="w-full rounded mb-3">
          <source src="your-video.mp4" type="video/mp4" />
          Your browser does not support the video tag.
        </video>
        <p class="text-gray-700">
          üôè ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶! ‡§Ü‡§™ ‡§Ø‡•á ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§¶‡•á‡§ñ ‡§ö‡•Å‡§ï‡•á ‡§π‡•à‡§Ç‡•§ ‡§π‡§Æ ‡§ú‡§≤‡•ç‡§¶ ‡§Ü‡§™‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á‡•§
        </p>
      </div>
    </div>

    <script>
      let generatedOTP = "";

      function sendOTP() {
        const name = document.getElementById("name").value.trim();
        const mobile = document.getElementById("mobile").value.trim();

        if (!name || !mobile) {
          alert("Please enter your name and mobile number.");
          return;
        }

        generatedOTP = Math.floor(1000 + Math.random() * 9000).toString();
        console.log("Generated OTP:", generatedOTP);

        document.getElementById("otp").style.display = "block";
        document.getElementById("submitBtn").style.display = "block";

        // ‚úÖ Send to Google Sheet
        const formData = new FormData();
formData.append("name", name);
formData.append("mobile", mobile);

fetch(
  "https://script.google.com/macros/s/AKfycbzJVB4FG7t9qmqCa6GLVraIF7o8hiCy_hAG3uZD3ytu9otSr95b6-NNuBH56muW3cc/exec",
  {
    method: "POST",
    body: formData
  }
)
  .then((res) => res.text())
  .then((data) => console.log("‚úÖ Sent to Google Sheet:", data))
  .catch((err) => console.error("‚ùå Sheet Error:", err));


        // ‚úÖ Send OTP via SMS using 2Factor
        fetch(
          `https://2factor.in/API/V1/21335cd0-50d1-11f0-a562-0200cd936042/SMS/${mobile}/${generatedOTP}`,
          {
            method: "GET",
          }
        )
          .then((res) => res.text())
          .then((data) => console.log("‚úÖ OTP sent:", data))
          .catch((err) => console.error("‚ùå SMS Error:", err));
      }

      function verifyOTP() {
        const userOTP = document.getElementById("otp").value.trim();
        if (userOTP === generatedOTP) {
          document.getElementById("videoSection").classList.remove("hidden");
        } else {
          alert("Incorrect OTP. Please try again.");
        }
      }
    </script>
  </body>
</html>
